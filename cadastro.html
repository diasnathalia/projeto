<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cadastro de Usuário</title>

</head>
<body>
  <main class="container" role="main" aria-label="Formulário de cadastro de usuário">
    <h1>Cadastro de Usuário</h1>
    <form id="registrationForm" novalidate>
      <label for="nome">Nome Completo</label>
      <input type="text" id="nome" name="nome" placeholder="Seu nome completo" required autocomplete="name" />
      <div class="error" id="errorNome" aria-live="assertive"></div>

      <label for="cpf">CPF</label>
      <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" maxlength="14" 
             required pattern="\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}" autocomplete="off" />
      <div class="error" id="errorCpf" aria-live="assertive"></div>

      <label for="login">Login</label>
      <input type="text" id="login" name="login" placeholder="Nome de usuário" required autocomplete="username" />
      <div class="error" id="errorLogin" aria-live="assertive"></div>

      <label for="senha">Senha</label>
      <input type="password" id="senha" name="senha" placeholder="Sua senha" required minlength="6" autocomplete="new-password" />
      <div class="error" id="errorSenha" aria-live="assertive"></div>

      <button type="submit" class="btn-submit" aria-label="Enviar cadastro">Cadastrar</button>
    </form>
    <div class="success-message" id="successMessage" role="alert" aria-live="polite"></div>
  </main>

<script>
  const cpfInput = document.getElementById('cpf');
  cpfInput.addEventListener('input', function(e) {
    let v = e.target.value.replace(/\D/g, '');
    if (v.length > 11) v = v.slice(0,11);
    v = v.replace(/(\d{3})(\d)/, '$1.$2');
    v = v.replace(/(\d{3})(\d)/, '$1.$2');
    v = v.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    e.target.value = v;
  });

  const form = document.getElementById('registrationForm');
  form.addEventListener('submit', function(event) {
    event.preventDefault();
    clearErrors();
    const nome = form.nome.value.trim();
    const cpf = form.cpf.value.trim();
    const login = form.login.value.trim();
    const senha = form.senha.value;

    let valid = true;

    if (!nome) {
      showError('errorNome', 'Por favor, informe seu nome completo.');
      valid = false;
    }
    if (!validateCPF(cpf)) {
      showError('errorCpf', 'CPF inválido. Use o formato 000.000.000-00.');
      valid = false;
    }
    if (!login) {
      showError('errorLogin', 'Por favor, informe um login.');
      valid = false;
    }
    if (senha.length < 6) {
      showError('errorSenha', 'A senha deve ter pelo menos 6 caracteres.');
      valid = false;
    }

    if (valid) {
      document.getElementById('successMessage').textContent = 'Usuário cadastrado com sucesso!';
      form.reset();
    } else {
      document.getElementById('successMessage').textContent = '';
    }
  });

  function showError(elementId, message) {
    const el = document.getElementById(elementId);
    el.textContent = message;
  }

  function clearErrors() {
    showError('errorNome', '');
    showError('errorCpf', '');
    showError('errorLogin', '');
    showError('errorSenha', '');
  }

  function validateCPF(cpf) {
    const cpfRegex = /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/;
    return cpfRegex.test(cpf);
  }
</script>
</body>
</html>

